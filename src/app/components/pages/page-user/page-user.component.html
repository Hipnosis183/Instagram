<viewer-users *ngIf="usersList.length > 0" (onScroll)="listIndex == 0 ? loadFollowers() : loadFollowing()"
  [title]="listTitle" [usersList]="usersList" (userSend)="loadUserPage($event)" (closeSend)="closeUsers()">
</viewer-users>
<div *ngIf="userProfile" class="user-container">
  <img-await [source]="userProfile.instagular.thumb" class="user-image"></img-await>
  <div>
    <div class="user-header">
      <div class="text-main text-[32px]">{{ userProfile.full_name ? userProfile.full_name : userProfile.username }}
      </div>
      <img *ngIf="userProfile.is_verified" src="/assets/images/verified.svg">
      <div *ngIf="userProfile.username != userName"
        (click)="userProfile.friendship.following ? unfollowUser() : followUser()" class="follow-button"
        [class]="userProfile.friendship.following ? 'follow-light' : 'follow-color'">
        {{ userProfile.friendship.following ? 'Following' : 'Follow' }}
      </div>
      <div *ngIf="userProfile.friendship.followed_by" class="pl-2 user-stats">
        <div class="text-sub">•</div>
        <div class="text-sub">Follows you</div>
      </div>
    </div>
    <div class="user-stats">
      <div class="text-sub">@{{ userProfile.username }}</div>
      <div class="text-sub">•</div>
      <div class="user-stat">
        <div class="text-main">{{ userProfile.media_count | shortNumber }}</div>
        <div class="text-sub">Posts</div>
      </div>
      <div class="cursor-pointer user-stat"
        (click)="!userProfile.is_private || (userProfile.is_private && userProfile.friendship.following) ? loadFollowers() : null">
        <div class="text-main">{{ userProfile.follower_count | shortNumber }}</div>
        <div class="text-sub">Followers</div>
      </div>
      <div class="cursor-pointer user-stat"
        (click)="!userProfile.is_private || (userProfile.is_private && userProfile.friendship.following) ? loadFollowing() : null">
        <div class="text-main">{{ userProfile.following_count | shortNumber }}</div>
        <div class="text-sub">Following</div>
      </div>
    </div>
    <div [innerHTML]="userProfile.biography | parseUrls " class="cursor-default my-5 text-main"></div>
    <div *ngIf="userProfile.external_url" class="user-link">
      <img src="/assets/images/link.svg">
      <a [href]="userProfile.external_url" target="_blank" rel="noopener noreferrer">
        {{ userProfile.external_url }}
      </a>
    </div>
  </div>
</div>
<div *ngIf="userProfile">
  <div
    *ngIf="!userProfile.is_private || (userProfile.is_private && userProfile.friendship.following); then allow; else block">
  </div>
  <ng-template #allow>
    <media-feed [feedPosts]="userPosts" [hideHeader]="true" (onScroll)="loadUser()"></media-feed>
  </ng-template>
  <ng-template #block>
    <div class="error-container mt-24">
      <img src="/assets/images/lock.svg">
      <div class="text-main">This account is private</div>
      <div class="text-sub">Follow to see their photos and videos.</div>
    </div>
  </ng-template>
</div>
<div *ngIf="userNotFound" class="error-container">
  <img src="/assets/images/slash.svg">
  <div class="text-main">This page is not available</div>
  <div class="text-sub">The link you followed may be broken, or the page may have been removed.</div>
</div>